---
layout: post
title:  "AI prompt"
categories: develop
tags:  AI
author: kttguo
---

* content
{:toc}

# prompt是什么？

一种不训练模型的情况下，用来指导模型生成特定的输出。让模型的输出更符合需求，减少模型输出的歧义性，使得回答更加有用。

以便更容易地使用提示和查看生成的输出。get一个prompt,返回模型对这个prompt的输出

## 两个关键原则

 ### 编写清晰明确的指令

清晰明确的说你希望模型执行的操作，这将指导着模型的输出。并减少无关或错误响应的机会

如何做到清晰明确说明

#### 使用分隔符清楚地表述输入的不同部分

使用 * ```Triple backticks三个反引号`

 ` """Triple quote三重引号, Triple dashes---三个破折号,尖括号< >Angle brackets, `<tag> </tag>`将prompt中输入的不同部分表示出来

```
text = f"""
你应该通过提供尽可能清晰和具体的指示来表达你希望模型做什么。这将引导模型朝着期望的输出方向发展，并减少收到无关或不正确回复的可能性。不要混淆清晰的提示与简短的提示。在许多情况下，更长的提示提供了更多的清晰度和上下文，这可以导致更详细和相关的输出。
"""
prompt = f"""
将由反引号包裹的文本翻译成一句话
变成一句话。
​```{text}```
"""

#模型输出如下
提供清晰和具体的指示，引导模型朝着期望的输出方向发展，减少收到无关或不正确回复的可能性。
```



#### 要求结构化输出

```
prompt=f"""
生成三本虚构书籍标题以及作者极其流派的列表
"""

输出如下：
1.《失落的时光》 - 作者：艾丽丝·温特沃斯（奇幻小说）
2.《迷失之城》 - 作者：加布里埃尔·克罗夫特（科幻小说）
3.《幻境之门》 - 作者：维多利亚·斯通（奇幻冒险小说）
```

JSON HTML

```
prompt=f"""
生成三本虚构书籍标题以及作者极其流派的列表
以JSON格式提供它们，包括以下键book_id，title，author，genre
"""
输出
{
  "books": [
    {
      "book_id": 1,
      "title": "The Shadow of the Moon",
      "author": "Elena Nightingale",
      "genre": "Fantasy"
    },
    {
      "book_id": 2,
      "title": "Echoes of Eternity",
      "author": "Lucas Blackwood",
      "genre": "Science Fiction"
    },
    {
      "book_id": 3,
      "title": "Whispers in the Dark",
      "author": "Isabella Ravenwood",
      "genre": "Mystery"
    }
  ]
}
```



#### 要求模型检查是否满足条件

如果任务有前提条件，告诉模型检查这些假设条件。如果不满足条件，则指示出这一点并停止尝试完整任务。还需要考虑潜在的边界情况,以避免意外错误或结果

```
text_1 =f"""
泡一杯茶很简单！首先，你需要把一些水煮沸。在那时，拿一个杯子，把茶包放进去。一旦水足够热，只需把它倒在茶包上。让茶泡一会儿。几分钟后，取出茶包。如果你喜欢，可以加一些糖或牛奶调味。就是这样！你可以享受一杯美味的茶。
"""
prompt = f"""
如果文本中包含一系列指令，则按以下格式重新编写这些指令：

Step 1 - ...
Step 2 - …
…
Step N - …

如果文本中不包含一系列指令，则简单写上"No steps provided."
\"\"\"{text_1}\"\"\"
"""

输出：
Step 1 - 把一些水煮沸。
Step 2 - 拿一个杯子，把茶包放进去。
Step 3 - 把煮沸的水倒在茶包上。
Step 4 - 让茶泡一会儿。
Step 5 - 取出茶包。
Step 6 - 如果需要，加入糖或牛奶调味。
```

```
text_2 = f"""
今天阳光明媚，鸟儿在歌唱。这是一个美好的一天，可以去 在公园里散步。鲜花盛开，树木在微中轻轻摇曳。人四处走动，享受着美好的天气。有些人在野餐，而另一些人则在玩耍游戏或只是在草地上放松。这是一个 完美的一天，在户外度过时光，欣赏大自然的美丽。
"""
prompt = f"""
如果文本中包含一系列指令，则按以下格式重新编写这些指令：

Step 1 - ...
Step 2 - …
…
Step N - …

如果文本中不包含一系列指令，则简单写上"No steps provided."

\"\"\"{text_2}\"\"\"

输出：No steps provided.
```

#### 少样本提示

(在模型执行任务之前,提供成功执行该任务的示例 ,明确你希望它做的实际任务是什么)

```
prompt = f"""
你的任务是以一致的风格回答。

<child>： 教我如何耐心。

<grandparent>：雕刻最深的河流 
山谷从不起眼的泉水流出;这
最伟大的交响曲起源于一个音符;
最复杂的挂毯始于一根孤零零的线。

<child>：教我关于韧性的知识。

模型输出：
<grandparent>：韧性不是一蹴而就的品质，它是在面对困难和挑战时坚持不懈的能力。就像大树在风雨中屹立不倒，我们也需要学会在逆境中坚强地前行。记住，韧性是通过不断的努力和坚持才能培养出来的。愿你在人生的旅途中拥有坚韧不拔的品质。
```



### 给模型留出思考的时间

#### 指定完成任务所需步骤

```
text = f"""
In a charming village, siblings Jack and Jill set out ona quest to fetch water from a hilltop well. As they climbed, singing joyfully, misfortune struck—Jack tripped on a stone and tumbled down the hill, with Jill following suit. 
Though slightly battered, the pair returned home to comforting embraces. Despite the mishap, their adventurous spirits remained undimmed, and they 
continued exploring with delight.
"""

# example 1
prompt_1 = f"""
执行以下操作：
1 - 用一句话总结以下由三个反引号分隔的文本。
2 - 将摘要都翻译成中文。
3 - 在中文摘要中列出每个名称。
4 - 输出包含以下内容的 json 对象 
键：chinese_summary、num_names。

用换行符分隔您的答案。

Text:
​```{text}```
"""

模型输出
Completion for prompt 1:
1 - Summary: Two siblings, Jack and Jill, go on a quest to fetch water but encounter misfortune along the way.

2 - 摘要：两兄妹杰克和吉尔出发去取水，但途中遭遇不幸。

3 - 名称：杰克、吉尔

4 - {
  "chinese_summary": "摘要：两兄妹杰克和吉尔出发去取水，但途中遭遇不幸。",
  "num_names": 2
}
```

一个结构良好的prompt,指定模型需要完成的步骤，制定了确切的格式

```
prompt_2 = f"""
执行以下操作：
1 - 用一句话总结以下由<>分隔的文本。
2 - 将摘要都翻译成中文。
3 - 在中文摘要中列出每个名称。
4 - 输出包含以下内容的 json 对象 
键：chinese_summary、num_names。

使用以下格式：
文本：<摘要文本>
总结： <总结>
翻译：<摘要翻译>
名称： <姓名摘要列表>
输出 JSON：<json with summary and num_names>

Text: <{text}>
"""

输出
总结：两兄妹杰克和吉尔在一个迷人的村庄出发去山顶的井取水，途中发生意外，他们虽然受了点伤，但依然保持着冒险精神。

翻译：在一个迷人的村庄，兄弟姐妹杰克和吉尔出发去山顶的井取水，途中发生意外，他们虽然受了点伤，但依然保持着冒险精神。

名称：杰克、吉尔

输出 JSON：{"chinese_summary": "在一个迷人的村庄，兄弟姐妹杰克和吉尔出发去山顶的井取水，途中发生意外，他们虽然受了点伤，但依然保持着冒险精神。", "num_names": 2}
```

#### 给模型足够时间去解析问题

不给模型时间去解决问题

```
确定学生的解决方案是否正确。

问题：
我正在建造一个太阳能发电装置，我需要帮助计算财务情况。
- 土地成本为每平方英尺100美元
- 我可以以每平方英尺250美元购买太阳能电池板
- 我谈判了一份维护合同，每年将花费我固定的10万美元，以及每平方英尺额外的10美元
作为第一年运营的总成本的一个关于平方英尺数量的函数是多少。

学生的解决方案：
设x为安装面积的大小，单位为平方英尺。
成本：
1. 土地成本：100x
2. 太阳能电池板成本：250x
3. 维护成本：100,000 + 100x
总成本：100x + 250x + 100,000 + 100x = 450x + 100,000
"""

输出
学生的解决方案是正确的。总成本的表达式为450x + 100,000。
```

但学生的解决方案实际上有错误

指导模型自行解决问题，然后比较它的解决方案和学生的解决方案之间的差别

```
确定学生的解决方案是否正确

为了解决问题，请按照以下步骤进行：
- 首先，解决问题并计算最终总数。
- 然后将您的解决方案与学生的解决方案进行比较，并评估学生的解决方案是否正确。
在您自己解决问题之前，请不要决定学生的解决方案是否正确。

使用以下格式：
问题：
​```
问题在这里
​```
学生的解决方案：
​```
学生的解决方案在这里
​```
实际解决方案：
​```
解决方案的步骤和您的解决方案在这里
​```
学生的解决方案是否与实际计算的解决方案相同：
​```
是或否
​```
学生的成绩：
​```
正确或不正确

问题：
我正在建造一个太阳能发电装置，我需要帮助计算财务情况。
- 土地成本为每平方英尺100美元
- 我可以以每平方英尺250美元购买太阳能电池板
- 我谈判了一份维护合同，每年将花费我固定的10万美元，以及每平方英尺额外的10美元
作为第一年运营的总成本的一个关于平方英尺数量的函数是多少。

学生的解决方案：
设x为安装面积的大小，单位为平方英尺。
成本：
1. 土地成本：100x
2. 太阳能电池板成本：250x
3. 维护成本：100,000 + 100x
总成本：100x + 250x + 100,000 + 100x = 450x + 100,000
​```
实际解决方案

确定学生的解决方案是否正确

为了解决问题，请按照以下步骤进行：
- 首先，解决问题并计算最终总数。
- 然后将您的解决方案与学生的解决方案进行比较，并评估学生的解决方案是否正确。
在您自己解决问题之前，请不要决定学生的解决方案是否正确。

使用以下格式：
问题：
​```
问题在这里
​```
学生的解决方案：
​```
学生的解决方案在这里
​```
实际解决方案：
​```
解决方案的步骤和您的解决方案在这里
​```
学生的解决方案是否与实际计算的解决方案相同：
​```
是或否
​```
学生的成绩：
​```
正确或不正确

问题：
我正在建造一个太阳能发电装置，我需要帮助计算财务情况。
- 土地成本为每平方英尺100美元
- 我可以以每平方英尺250美元购买太阳能电池板
- 我谈判了一份维护合同，每年将花费我固定的10万美元，以及每平方英尺额外的10美元
作为第一年运营的总成本的一个关于平方英尺数量的函数是多少。

学生的解决方案：
设x为安装面积的大小，单位为平方英尺。
成本：
1. 土地成本：100x
2. 太阳能电池板成本：250x
3. 维护成本：100,000 + 100x
总成本：100x + 250x + 100,000 + 100x = 450x + 100,000
​```
实际解决方案
prompt = f"""
确定学生的解决方案是否正确

为了解决问题，请按照以下步骤进行：
- 首先，解决问题并计算最终总数。
- 然后将您的解决方案与学生的解决方案进行比较，并评估学生的解决方案是否正确。
在您自己解决问题之前，请不要决定学生的解决方案是否正确。

使用以下格式：
问题：
​```
问题在这里
​```
学生的解决方案：
​```
学生的解决方案在这里
​```
实际解决方案：
​```
解决方案的步骤和您的解决方案在这里
​```
学生的解决方案是否与实际计算的解决方案相同：
​```
是或否
​```
学生的成绩：
​```
正确或不正确

问题：
我正在建造一个太阳能发电装置，我需要帮助计算财务情况。
- 土地成本为每平方英尺100美元
- 我可以以每平方英尺250美元购买太阳能电池板
- 我谈判了一份维护合同，每年将花费我固定的10万美元，以及每平方英尺额外的10美元
作为第一年运营的总成本的一个关于平方英尺数量的函数是多少。

学生的解决方案：
设x为安装面积的大小，单位为平方英尺。
成本：
1. 土地成本：100x
2. 太阳能电池板成本：250x
3. 维护成本：100,000 + 100x
总成本：100x + 250x + 100,000 + 100x = 450x + 100,000
​```
实际解决方案
"""

模型输出
​```
总成本 = 土地成本 + 太阳能电池板成本 + 维护成本
总成本 = 100x + 250x + (100,000 + 10x)
总成本 = 350x + 100,000
​```
学生的解决方案是否与实际计算的解决方案相同：
​```
不是
​```
学生的成绩：
​```
不正确
​```
```





# ## 模型的限制

胡编乱造 虚假输出

first find relevant information,then answer the question based on the relevant information(首先找到相关信息，然后根据相关信息回答问题)

先从文本中找到引用,然后使用这些引用来回答问题 ,并且把答案追溯到源文件

## 提示词的开发过程—如何迭代和完善提示词

不能指望第一次就把提示词写好，需要有一个好的迭代过程，让你的提示词变得更好，找到对任务实现效果较好的提示词。一些思考框架如何迭代开发一个提示词

需要一个过程，为你的特定应用挖掘出一个好的提示。提示词工程师最重要的不是写出一个完美的提示词，而是知道如何用一个更好的过程来开发提示词

* 你有一个关于你想做什么的想法，你想完成的任务。
* 初步尝试编写提示词，希望能有一个清晰而具体的提示。
* 然后运行，看看得到什么结果。
* 如果效果不好，就需要反复的过程来来弄清楚为什么指令不起作用，问题在哪里，如何改善

你想解决什么问题，或如何处理它。改变实施方案，然后运行另一个实验，如此循环往复，来得到一个有效的提示词

1.生成的内容太长-->控制大语言模型输出的长度 use at most 50 words /3 sentences

2.文本输出重点方向错误，它生成的内容是面对零售商的，更侧重于技术细节，需要 将零售商感兴趣的点告知模型

3.展示chatgpt强大的功能，直接生成了HTML元素和页面

![72035051650](C:\Users\GTT\AppData\Local\Temp\1720350516504.png)

## 特定指令

### 总结-summarizing

如何以编程的方式实现对文本的总结。对评论区大量的评论生成简短的摘要，给定价部门、产品部门，运输部门生成对应的信息，让更了解用户的想法,

提取信息extract

### 推理类

情感/情绪提取器，从用户的评论中提取丰富的信息

识别人类情感，提取物品和品牌

提取情感

###翻译-transform

校对,翻译

如何使用这种能力  

语气（俚语变商业信函，将json换成HTML），受众（正式和非正式的），拼写检查和语法检查，在评论发表之前检查评论是否有错

### 扩展 expanding

扩写-

将一个简短的的主题进行扩写
例子：生成某些基于某些信息的个性化电子邮件 

超参数 temperature--随机性与创造性
这个数值越高，，模型越有创造力

## 打造聊天机器人
使用大语言模型来建立你的自定义聊天机器人。餐馆里的AI接单员，AI客户failing
聊天补全模式
以一系列的输入信息作为输入，然后返回模型生成的信息输出 

# 提示词四要素

## 提示词四要素包含那些内容？

### 指令

想要模型执行的命令或任务,包括但不限于:概括,讲故事,优缺点,利弊分析,问题解决,对比,教训

### 上下文

包含外部信息或额外的上下文信息,引导模型更好的输出

背景:提供背景信息,数据或上下文以便生成准确数据

目标:说明回应的目标或目的(如通知,说服,娱乐)

范围:界定主题的范围

扮演角色:说明要采用的角色或观点(如:专家\评论家\爱好)

### 输入数据

用户输入的问题或内容

示例:提供所需风格,结构或内容的示例

案例研究:要求参考相关案例研究或现实世界示例

数据:鼓励使用统计数据或数据支持主张

个性化:根据用户偏好或特点进行个性化要求

### 输出指示

指定输出的类型或格式

语气:指定所需语气(如正式,随意,信息性,说服性)

格式:定义格式或结构(如论文,要点,大纲,对话)

引用:要求包含引用或来来源一支持信息

限制:约束条件,如字数或字符数限制

## 提示词四要素使用案例

prompt设计通用原则

``` """ --- <>

```

如何系统地设计好的提示词

例子

